{"version":3,"file":"FirebaseTestLab.js","sourceRoot":"","sources":["../src/FirebaseTestLab.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAwB;AACxB,oEAA2C;AAE3C,+CAAyD;AAEzD,MAAM,WAAW,GAAG,cAAI,CAAC,IAAI,CAAC,sCAAwB,EAAE,EAAE,SAAS,CAAC,CAAC;AAE9D,KAAK,UAAU,oBAAoB,CACxC,YAAoB,EACpB,aAAqB;IAErB,MAAM,qBAAU,CACd,QAAQ,EACR;QACE,UAAU;QACV,MAAM;QACN,SAAS;QACT,KAAK;QACL,QAAQ;QACR,iBAAiB;QACjB,OAAO;QACP,YAAY;QACZ,QAAQ;QACR,aAAa;QACb,UAAU;QACV,wDAAwD;KACzD,EACD;QACE,KAAK,EAAE,SAAS;KACjB,CACF,CAAC;AACJ,CAAC;AAxBD,oDAwBC;AAEM,KAAK,UAAU,gCAAgC,CACpD,MAA8B,EAAE;IAEhC,MAAM,qBAAU,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,EAAE;QACpD,GAAG,EAAE,WAAW;QAChB,GAAG,EAAE;YACH,GAAG,OAAO,CAAC,GAAG;YACd,GAAG,GAAG;SACP;KACF,CAAC,CAAC;IAEH,MAAM,qBAAU,CAAC,WAAW,EAAE,CAAC,+BAA+B,CAAC,EAAE;QAC/D,GAAG,EAAE,WAAW;QAChB,GAAG,EAAE;YACH,GAAG,OAAO,CAAC,GAAG;YACd,GAAG,GAAG;SACP;KACF,CAAC,CAAC;IAEH,OAAO,MAAM,oBAAoB,CAC/B,cAAI,CAAC,IAAI,CAAC,WAAW,EAAE,2CAA2C,CAAC,EACnE,cAAI,CAAC,IAAI,CAAC,WAAW,EAAE,mEAAmE,CAAC,CAC5F,CAAC;AACJ,CAAC;AAvBD,4EAuBC","sourcesContent":["import path from 'path';\nimport spawnAsync from '@expo/spawn-async';\n\nimport { getExpoRepositoryRootDir } from './Directories';\n\nconst ANDROID_DIR = path.join(getExpoRepositoryRootDir(), 'android');\n\nexport async function runAndroidTestsAsync(\n  pathToAppApk: string,\n  pathToTestApk: string\n): Promise<void> {\n  await spawnAsync(\n    'gcloud',\n    [\n      'firebase',\n      'test',\n      'android',\n      'run',\n      '--type',\n      'instrumentation',\n      '--app',\n      pathToAppApk,\n      '--test',\n      pathToTestApk,\n      '--device',\n      'model=Nexus6,version=25,locale=en,orientation=portrait',\n    ],\n    {\n      stdio: 'inherit',\n    }\n  );\n}\n\nexport async function buildLocalAndroidAndRunTestAsync(\n  env: { [key: string]: any } = {}\n): Promise<void> {\n  await spawnAsync('./gradlew', [':app:assembleDebug'], {\n    cwd: ANDROID_DIR,\n    env: {\n      ...process.env,\n      ...env,\n    },\n  });\n\n  await spawnAsync('./gradlew', [':app:assembleDebugAndroidTest'], {\n    cwd: ANDROID_DIR,\n    env: {\n      ...process.env,\n      ...env,\n    },\n  });\n\n  return await runAndroidTestsAsync(\n    path.join(ANDROID_DIR, 'app/build/outputs/apk/debug/app-debug.apk'),\n    path.join(ANDROID_DIR, 'app/build/outputs/apk/androidTest/debug/app-debug-androidTest.apk')\n  );\n}\n"]}