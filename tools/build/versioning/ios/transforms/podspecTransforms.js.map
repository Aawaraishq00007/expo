{"version":3,"file":"podspecTransforms.js","sourceRoot":"","sources":["../../../../src/versioning/ios/transforms/podspecTransforms.ts"],"names":[],"mappings":";;;AAEA,SAAgB,iBAAiB,CAAC,WAAmB;IACnD,OAAO;QACL,UAAU,EAAE;YACV,oBAAoB;YACpB;gBACE,wEAAwE;gBACxE,OAAO,EAAE,6DAA6D;gBACtE,IAAI,EAAE,QAAQ,WAAW,MAAM;aAChC;YACD;gBACE,+CAA+C;gBAC/C,OAAO,EAAE,qEAAqE;gBAC9E,IAAI,EAAE,KAAK,WAAW,MAAM;aAC7B;YACD;gBACE,6BAA6B;gBAC7B,OAAO,EAAE,+BAA+B;gBACxC,IAAI,EAAE,EAAE;aACT;YACD;gBACE,0CAA0C;gBAC1C,OAAO,EAAE,0BAA0B;gBACnC,IAAI,EAAE,sBAAsB;aAC7B;YAED,2BAA2B;YAC3B;gBACE,2CAA2C;gBAC3C,KAAK,EAAE,oBAAoB;gBAC3B,OAAO,EAAE,6CAA6C;gBACtD,IAAI,EAAE,IAAI,WAAW,MAAM,WAAW,KAAK;aAC5C;YACD;gBACE,8CAA8C;gBAC9C,KAAK,EAAE,oBAAoB;gBAC3B,OAAO,EAAE,2BAA2B;gBACpC,IAAI,EAAE,IAAI,WAAW,yBAAyB;aAC/C;YACD;gBACE,4BAA4B;gBAC5B,KAAK,EAAE,CAAC,oBAAoB,EAAE,qBAAqB,CAAC;gBACpD,OAAO,EAAE,mCAAmC;gBAC5C,IAAI,EAAE,KAAK,WAAW,IAAI;aAC3B;YAED,iBAAiB;YACjB;gBACE,0CAA0C;gBAC1C,KAAK,EAAE,wBAAwB;gBAC/B,OAAO,EAAE,0DAA0D;gBACnE,IAAI,EAAE,mBAAmB,WAAW,MAAM;aAC3C;YAED,OAAO;YACP;gBACE,8CAA8C;gBAC9C,KAAK,EAAE,cAAc;gBACrB,OAAO,EAAE,4CAA4C;gBACrD,IAAI,EAAE,IAAI,WAAW,MAAM,WAAW,MAAM,WAAW,MAAM,WAAW,KAAK;aAC9E;YAED,oBAAoB;YACpB;gBACE,4BAA4B;gBAC5B,KAAK,EAAE,2BAA2B;gBAClC,OAAO,EAAE,qCAAqC;gBAC9C,IAAI,EAAE,KAAK,WAAW,IAAI;aAC3B;SACF;KACF,CAAC;AACJ,CAAC;AAtED,8CAsEC","sourcesContent":["import { TransformPipeline } from '.';\n\nexport function podspecTransforms(versionName: string): TransformPipeline {\n  return {\n    transforms: [\n      // Common transforms\n      {\n        // Transforms some podspec fields by adding versionName at the beginning\n        replace: /\\.(name|header_dir|module_name)(\\s*=\\s*[\"'])([^\"']+)([\"'])/g,\n        with: `.$1$2${versionName}$3$4`,\n      },\n      {\n        // Prefixes dependencies listed in the podspecs\n        replace: /(\\.dependency\\s+[\"'])(Yoga|React\\-|ReactCommon|RCT|FB)([^\"']*[\"'])/g,\n        with: `$1${versionName}$2$3`,\n      },\n      {\n        // Removes source conditional\n        replace: /source\\s*\\=\\s*\\{[.\\S\\s]+?end/g,\n        with: '',\n      },\n      {\n        // Points spec source at correct directory\n        replace: /(\\.source\\s*\\=\\s*)\\S+\\n/g,\n        with: '$1{ :path => \".\" }\\n',\n      },\n\n      // React-Core & ReactCommon\n      {\n        // Fixes header_subspecs for RCTBlobHeaders\n        paths: 'React-Core.podspec',\n        replace: /\\{(RCTBlobManager),(RCTFileReaderModule)\\}/g,\n        with: `{${versionName}$1,${versionName}$2}`,\n      },\n      {\n        // Prefixes conflicting AccessibilityResources\n        paths: 'React-Core.podspec',\n        replace: /\"AccessibilityResources\"/g,\n        with: `\"${versionName}AccessibilityResources\"`,\n      },\n      {\n        // Fixes HEADER_SEARCH_PATHS\n        paths: ['React-Core.podspec', 'ReactCommon.podspec'],\n        replace: /(Headers\\/Private\\/)(React-Core)/g,\n        with: `$1${versionName}$2`,\n      },\n\n      // React-cxxreact\n      {\n        // Fixes excluding SampleCxxModule.* files\n        paths: 'React-cxxreact.podspec',\n        replace: /\\.exclude_files(\\s*=\\s*[\"'])(SampleCxxModule\\.\\*)([\"'])/g,\n        with: `.exclude_files$1${versionName}$2$3`,\n      },\n\n      // Yoga\n      {\n        // Unprefixes inner directory for source_files\n        paths: 'Yoga.podspec',\n        replace: /\\{(Yoga),(YGEnums),(YGMacros),(YGValue)\\}/g,\n        with: `{${versionName}$1,${versionName}$2,${versionName}$3,${versionName}$4}`,\n      },\n\n      // FBReactNativeSpec\n      {\n        // Fixes HEADER_SEARCH_PATHS\n        paths: 'FBReactNativeSpec.podspec',\n        replace: /(\\/Libraries\\/)(FBReactNativeSpec)/g,\n        with: `$1${versionName}$2`,\n      },\n    ],\n  };\n}\n"]}