{"version":3,"file":"XDL.js","sourceRoot":"","sources":["../src/XDL.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sDAA8B;AAE9B,mDAAqC;AACrC,2CAA6B;AAS7B;;GAEG;AACI,KAAK,UAAU,8BAA8B,CAClD,WAAmB,EACnB,UAAmB,EAAE;;IAErB,iBAAO,CAAC,GAAG,CAAC,cAAc,GAAG,GAAG,CAAC;IAEjC,MAAM,QAAQ,GAAG,OAAA,OAAO,CAAC,QAAQ,0CAAE,QAAQ,KAAI,iBAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;IACpF,MAAM,QAAQ,GAAG,OAAA,OAAO,CAAC,QAAQ,0CAAE,QAAQ,KAAI,iBAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC;IAEpF,IAAI,QAAQ,IAAI,QAAQ,EAAE;QACxB,GAAG,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;QAC/B,MAAM,OAAO,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;KAC1E;SAAM;QACL,GAAG,CAAC,SAAS,CAAC,8EAA8E,CAAC,CAAC;KAC/F;IAED,GAAG,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;IAC/B,MAAM,WAAW,GAAa,EAAE,CAAC;IAEjC,IAAI,iBAAO,CAAC,GAAG,CAAC,EAAE,EAAE;QAClB,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;KACxC;IAED,MAAM,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,WAAW,EAAE;QACpD,IAAI,EAAE,WAAW;KAClB,CAAC,CAAC;AACL,CAAC;AA1BD,wEA0BC","sourcesContent":["import process from 'process';\n\nimport * as ExpoCLI from './ExpoCLI';\nimport * as Log from './Log';\n\ntype Options = {\n  userpass?: {\n    username: string;\n    password: string;\n  };\n};\n\n/**\n * Uses the installed version of `expo-cli` to publish a project.\n */\nexport async function publishProjectWithExpoCliAsync(\n  projectRoot: string,\n  options: Options = {}\n): Promise<void> {\n  process.env.EXPO_NO_DOCTOR = '1';\n\n  const username = options.userpass?.username || process.env.EXPO_CI_ACCOUNT_USERNAME;\n  const password = options.userpass?.password || process.env.EXPO_CI_ACCOUNT_PASSWORD;\n\n  if (username && password) {\n    Log.collapsed('Logging in...');\n    await ExpoCLI.runExpoCliAsync('login', ['-u', username, '-p', password]);\n  } else {\n    Log.collapsed('Expo username and password not specified. Using currently logged-in account.');\n  }\n\n  Log.collapsed('Publishing...');\n  const publishArgs: string[] = [];\n\n  if (process.env.CI) {\n    publishArgs.push('--max-workers', '1');\n  }\n\n  await ExpoCLI.runExpoCliAsync('publish', publishArgs, {\n    root: projectRoot,\n  });\n}\n"]}